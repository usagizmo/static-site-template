/*! Sticky | (c) Anthony Garand http://garand.me | MIT License | https://github.com/garand/sticky */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(l){var e=Array.prototype.slice,n=Array.prototype.splice,o={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1,zIndex:"auto"},u=l(window),h=l(document),g=[],y=u.height(),t=function(){for(var t=u.scrollTop(),e=h.height(),i=e-y,n=i<t?i-t:0,r=0,s=g.length;r<s;r++){var o=g[r],c=o.stickyWrapper.offset().top-o.topSpacing-n;if(o.stickyWrapper.css("height",o.stickyElement.outerHeight()),t<=c)null!==o.currentTop&&(o.stickyElement.css({width:"",position:"",top:"","z-index":""}),o.stickyElement.parent().removeClass(o.className),o.stickyElement.trigger("sticky-end",[o]),o.currentTop=null);else{var p,a=e-o.stickyElement.outerHeight()-o.topSpacing-o.bottomSpacing-t-n;if(a<0?a+=o.topSpacing:a=o.topSpacing,o.currentTop!==a)o.getWidthFrom?p=l(o.getWidthFrom).width()||null:o.widthFromWrapper&&(p=o.stickyWrapper.width()),null==p&&(p=o.stickyElement.width()),o.stickyElement.css("width",p).css("position","fixed").css("top",a).css("z-index",o.zIndex),o.stickyElement.parent().addClass(o.className),null===o.currentTop?o.stickyElement.trigger("sticky-start",[o]):o.stickyElement.trigger("sticky-update",[o]),o.currentTop===o.topSpacing&&o.currentTop>a||null===o.currentTop&&a<o.topSpacing?o.stickyElement.trigger("sticky-bottom-reached",[o]):null!==o.currentTop&&a===o.topSpacing&&o.currentTop<a&&o.stickyElement.trigger("sticky-bottom-unreached",[o]),o.currentTop=a;var d=o.stickyWrapper.parent();o.stickyElement.offset().top+o.stickyElement.outerHeight()>=d.offset().top+d.outerHeight()&&o.stickyElement.offset().top<=o.topSpacing?o.stickyElement.css("position","absolute").css("top","").css("bottom",0).css("z-index",""):o.stickyElement.css("position","fixed").css("top",a).css("bottom","").css("z-index",o.zIndex)}}},i=function(){y=u.height();for(var t=0,e=g.length;t<e;t++){var i=g[t],n=null;i.getWidthFrom?i.responsiveWidth&&(n=l(i.getWidthFrom).width()):i.widthFromWrapper&&(n=i.stickyWrapper.width()),null!=n&&i.stickyElement.css("width",n)}},c={init:function(t){var s=l.extend({},o,t);return this.each(function(){var t=l(this),e=t.attr("id"),i=e?e+"-"+o.wrapperClassName:o.wrapperClassName,n=l("<div></div>").attr("id",i).addClass(s.wrapperClassName);t.wrapAll(n);var r=t.parent();s.center&&r.css({width:t.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"===t.css("float")&&t.css({float:"none"}).parent().css({float:"right"}),s.stickyElement=t,s.stickyWrapper=r,s.currentTop=null,g.push(s),c.setWrapperHeight(this),c.setupChangeListeners(this)})},setWrapperHeight:function(t){var e=l(t),i=e.parent();i&&i.css("height",e.outerHeight())},setupChangeListeners:function(e){window.MutationObserver?new window.MutationObserver(function(t){(t[0].addedNodes.length||t[0].removedNodes.length)&&c.setWrapperHeight(e)}).observe(e,{subtree:!0,childList:!0}):(e.addEventListener("DOMNodeInserted",function(){c.setWrapperHeight(e)},!1),e.addEventListener("DOMNodeRemoved",function(){c.setWrapperHeight(e)},!1))},update:t,unstick:function(t){return this.each(function(){for(var t=l(this),e=-1,i=g.length;0<i--;)g[i].stickyElement.get(0)===this&&(n.call(g,i,1),e=i);-1!==e&&(t.unwrap(),t.css({width:"",position:"",top:"",float:"","z-index":""}))})}};window.addEventListener?(window.addEventListener("scroll",t,!1),window.addEventListener("resize",i,!1)):window.attachEvent&&(window.attachEvent("onscroll",t),window.attachEvent("onresize",i)),l.fn.sticky=function(t){return c[t]?c[t].apply(this,e.call(arguments,1)):"object"!=typeof t&&t?void l.error("Method "+t+" does not exist on jQuery.sticky"):c.init.apply(this,arguments)},l.fn.unstick=function(t){return c[t]?c[t].apply(this,e.call(arguments,1)):"object"!=typeof t&&t?void l.error("Method "+t+" does not exist on jQuery.sticky"):c.unstick.apply(this,arguments)},l(function(){setTimeout(t,0)})});
